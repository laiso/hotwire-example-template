<section class="row-end-auto">
  <h2><%= stage.name %></h2>

  <ol>
    <% stage.cards.rank(:row_order).each do |card| %>
      <li class="group">
        <%= card.content %>

        <%= form_with model: [ stage.board, card ] do |form| %>
          <%= form.hidden_field :row_order_position, value: "up" %>

          <button class="group-first-of-type:hidden">
            Move <%= card.name %> up
          </button>
        <% end %>

        <%= form_with model: [ stage.board, card ] do |form| %>
          <%= form.hidden_field :row_order_position, value: "down" %>

          <button class="group-last-of-type:hidden">
            Move <%= card.name %> down
          </button>
        <% end %>

        <%= form_with model: [ stage.board, card ] do |form| %>
          <%= form.hidden_field :row_order_position, value: 0 %>

          <%= form.label :stage_id do %>
            Stages
          <% end %>
          <%= form.select :stage_id, stage.other_stages.pluck(:name, :id) %>
          <button>
            Move to Stage
          </button>
        <% end %>
      </li>
    <% end %>
  </ol>
</section>
